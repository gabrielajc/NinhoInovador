<!-- /snippets/product-template.liquid -->

{%- assign id = section.id -%}

{%- assign current_variant = product.selected_or_first_available_variant -%}
{%- assign featured_media = current_variant.featured_media | default: product.featured_media -%}
{%- assign stacked = false -%}
{%- if section.settings.media_layout == "stacked" -%}
  {%- assign stacked = true -%}
{%- endif -%}

{%- assign first_media = true -%}

{%- if product.media.size > 1 -%}
  {%- assign carousel = true -%}
{%- else -%}
  {%- assign carousel = false -%}
{%- endif -%}

{%- if emptyState -%}
  {%- assign vendor = 'home_page.onboarding.product_vendor' | t -%}
  {%- assign sku = '12345' -%}
  {%- assign title = 'home_page.onboarding.product_title' | t -%}
  {%- assign compare_at_price = 2999 -%}
  {%- assign price = 1999 -%}
{%- else -%}
  {%- assign vendor = product.vendor -%}
  {%- assign sku = current_variant.sku -%}
  {%- assign title = product.title -%}
  {%- assign compare_at_price = current_variant.compare_at_price -%}
  {%- assign price = current_variant.price -%}
{%- endif -%}

{%- if compare_at_price > price -%}
  {%- assign on_sale = true -%}
{%- else -%}
  {%- assign on_sale = false -%}
{%- endif -%}

{%- if current_variant.available -%}
  {%- assign sold_out = false -%}
{%- else -%}
  {%- assign sold_out = true -%}
{%- endif -%}

{%- assign enable_zoom = section.settings.enable_zoom -%}
{%- assign product_image_zoom_size = '1024x1024' -%}
{%- assign product_image_scale = '2' -%}
{%- assign product_tabs_position = section.settings.dbtfy_product_tabs_position -%}
{%- assign product_description_position = section.settings.dbtfy_product_description_position -%}

{%- assign live_view_under_price = false -%}
{%- assign live_view_under_button = false -%}

{%- if settings.dbtfy_live_view -%}
  {%- if settings.dbtfy_live_view_position == 'under_product_price' -%}
    {%- assign live_view_under_price = true -%}
  {%- else -%}
    {%- assign live_view_under_button = true -%}
  {%- endif -%}
{%- endif -%}

{%- assign has_description = false -%}

{%- if section.settings.show_product_description and product.description != blank -%}
  {%- assign has_description = true -%}
{%- endif -%}

{%- assign is_to_split_description = false -%}

{%- if has_description and section.settings.enable_split_description and product.description contains "[split_description]"  -%}
  {%- assign is_to_split_description = true -%}
{%- endif -%}

{%- assign show_info_section = false -%}

{%- if is_to_split_description  -%}
  {%- assign show_info_section = true -%}
{%- endif -%}

{%- if has_description and product_description_position == "separate_section" -%}
  {%- assign show_info_section = true -%}
{%- elsif section.blocks.size >= 1 -%}
  {%- if product_tabs_position == "separate_section" -%}
    {%- assign show_info_section = true -%}
  {%- elsif product_description_position == "separate_section" -%}
    {%- if product_tabs_position != "under_addtocart" -%}
      {%- if product_tabs_position == "under_description" or product_tabs_position == "above_description" -%}
        {%- assign show_info_section = true -%}
      {%- endif -%}
    {%- endif -%}
  {%- endif -%}
{%- endif -%}

{% case section.settings.image_size %}
  {% when 'small' %}
    {%- assign product_image_width = 'large--five-twelfths' -%}
    {%- assign product_description_width = 'large--seven-twelfths' -%}
  {% when 'medium' %}
    {%- assign product_image_width = 'large--six-twelfths' -%}
    {%- assign product_description_width = 'large--six-twelfths' -%}
  {% when 'large' %}
    {%- assign product_image_width = 'large--seven-twelfths' -%}
    {%- assign product_description_width = 'large--five-twelfths' -%}
{% endcase %}

<meta itemprop="url" content="{{ shop.url }}{{ product.url }}">
<meta itemprop="image" content="{{ product.featured_media | img_url: 'grande' }}">
<meta itemprop="productID" content="{{ product.id }}">

<div class="product-single" data-product-handle="{{ product.handle }}" data-product-id="{{ product.id }}">
  <div class="box">
    <div class="wrapper">
      <div class="grid product-single">
        <!-- left grid item  -->
        <div id="ProductMedia-{{ section.id }}" class="grid__item {{ product_image_width }} text-center">
          {%- if product.images != blank -%}
            <!-- media group (main media + thumbnails) -->
            <div id="ProductMediaGroup-{{ section.id }}" class="product-single__media-group-wrapper" data-product-single-media-group-wrapper>
              <div class="grid grid-small {% if product.media.size > 1 %}grid-spacer {% endif %}product-single__media-group{% unless stacked %} product-single__media-group--single-xr{% endunless %}{% if carousel %} slick{% endif %}" data-product-single-media-group>
                {%- assign enable_image_zoom = section.settings.enable_image_zoom -%}
                {%- assign height = 850 -%}
                {%- assign width = 575 -%}
                {%- assign first_3d_model = product.media | where: "media_type", "model" | first -%}
                {% comment %}
                  Display product images
                {% endcomment %}
                {%- for media in product.media -%}
                  {%- assign featured = false -%}
                  {%- if media == featured_media -%}
                    {%- assign featured = true -%}
                  {%- endif -%}

                  {%- capture thumbnail_alt -%}
                    {%- if media.media_type == 'video' or media.media_type == 'external_video' -%}
                      {{ 'products.product.video_thumbnail_alt' | t: imageAlt: media.alt | escape }}
                    {%- elsif media.media_type == 'model' -%}
                      {{ 'products.product.model_thumbnail_alt' | t: imageAlt: media.alt | escape }}
                    {%- else -%}
                      {{ 'products.product.gallery_thumbnail_alt' | t: imageAlt: media.alt | escape }}
                    {%- endif -%}
                  {%- endcapture -%}

                  <div class="grid__item product-single__media-flex-wrapper{% if stacked %} product-stacked_media_flex{% endif %}" data-slick-media-label="{{ thumbnail_alt }}" data-product-single-media-flex-wrapper>
                    <div class="product-single__media-flex">
                      {%- render 'media' with media, enable_image_zoom: enable_image_zoom, stacked: stacked, featured: featured, width: width, height: height, id: id, video_looping: section.settings.enable_video_looping -%}

                      {% comment %}
                        Display a "View in your space" button (multi) for the first visible media and each individual model.
                        Stacked layout only.
                      {% endcomment %}
                      {% if stacked %}
                        {%- assign xr_id = false -%}
                        {%- if first_media and first_3d_model -%}
                          {%- assign xr_id = first_3d_model.id -%}
                        {%- elsif media.media_type == 'model' -%}
                          {%- assign xr_id = media.id -%}
                        {%- endif -%}

                        {%- if xr_id -%}
                          {%- render 'xr-button' with model_id: xr_id, multi: true -%}
                        {%- endif -%}
                        {%- assign first_media = false -%}
                      {% endif %}
                    </div>
                  </div>
                {%- endfor -%}
              </div>

              {% comment %}
                Display a "View in your space" button (single).
                Stacked/Thumbnails layout (mobile)
                Thumbnail layout only (desktop)
              {% endcomment %}
              {%- if first_3d_model -%}
              {%- render 'xr-button' with model_id: first_3d_model.id, multi: false -%}
              {%- endif -%}

              {%- if product.media.size > 1 -%}
              <div class="product-single__thumbnails grid grid-small {% if stacked %}medium--hide large--hide{% endif %}{% if carousel %} slick{% endif %}{% if product.images.size <= 5 %} slick-disabled{% endif %}" data-product-thumbnails>
                {% for media in product.media %}
                  <div class="grid__item one-fifth product-thumbnail-wrapper" data-product-thumbnail-wrapper>
                    {%- capture thumbnail_alt -%}
                      {%- if media.media_type == 'video' or media.media_type == 'external_video' -%}
                        {{ 'products.product.video_thumbnail_alt' | t: imageAlt: media.alt | escape }}
                      {%- elsif media.media_type == 'model' -%}
                        {{ 'products.product.model_thumbnail_alt' | t: imageAlt: media.alt | escape }}
                      {%- else -%}
                        {{ 'products.product.gallery_thumbnail_alt' | t: imageAlt: media.alt | escape }}
                      {%- endif -%}
                    {%- endcapture -%}

                    {% assign media_aspect_ratio = media.aspect_ratio | default: media.preview_image.aspect_ratio %}

                    <a class="product--wrapper product-single__thumbnail media-wrapper image-link {% if media == featured_media %} active-thumb{% endif %}"
                      data-product-thumbnail
                      data-media-id="{{ media.id }}"
                      style="padding-top: {{ 1 | divided_by: media_aspect_ratio | times: 100 }}%;">
                      <img class="product--image product-single__thumb media lazyload"
                      {%- render 'lazysizes', img: media, img_type: 'responsive' -%}
                      alt="{{ thumbnail_alt }}"
                      data-media-id="{{ media.id }}">
                      {%- if media.media_type == 'video' or media.media_type == 'external_video' or media.media_type == 'model' -%}
                        <div class="product-single__thumbnail-badge">
                          {% render 'svg-definitions' with media.media_type %}
                        </div>
                      {%- endif -%}
                    </a>
                  </div>
                {% endfor %}
              </div>
              {%- endif -%}
            </div>
          {%- elsif product.images.size < 1 or emptyState -%}
            {{ 'product-1' | placeholder_svg_tag: 'placeholder-svg' }}
          {%- endif -%}
          <hr class="hr-divider hr-rev product-single-divider medium--hide large--hide">
        </div>

        <!-- right grid item -->
        <div id="ProductMeta-{{ section.id }}" class="grid__item product-single__meta--wrapper {{ product_description_width }}{% if emptyState %} large--sticky medium--sticky sticky-check-header{% endif %} {% if sold_out %}variant-soldout{% endif %}">
          <div class="product-single__meta">
            {%- assign showProductProperties = false -%}

            {%- if section.settings.show_product_vendor and product.vendor != blank -%}
              {%- assign showProductProperties = true -%}
            {%- elsif section.settings.show_product_type and product.type != blank -%}
              {%- assign showProductProperties = true -%}
            {%- elsif section.settings.show_product_sku and sku != blank -%}
              {%- assign showProductProperties = true -%}
            {%- endif -%}

            {%- if showProductProperties -%}
            <div class="product-header-wrapper spacer-bottom">
              <ul class="inline-list">
                {%- if section.settings.show_product_vendor and product.vendor != blank -%}
                <li>
                  <a href="{{ product.vendor | url_for_vendor }}" class="product-single__vendor text-small">
                    <span class="{{ settings.icon }} icon-middle">store</span>
                    <span itemprop="brand">{{ product.vendor }}</span>
                  </a>
                </li>
                {%- endif -%}

                {%- if section.settings.show_product_type and product.type != blank -%}
                <li>
                  <a href="{{ product.type | url_for_type }}" class="product-single__vendor text-small">
                    <span class="{{ settings.icon }} icon-middle">folder</span>
                    {{ product.type }}
                  </a>
                </li>
                {%- endif -%}

                {%- if section.settings.show_product_sku -%}
                <li>
                  <span class="product-single__sku text-small{% if sku == blank %} hide{% endif %}">
                    <span class="{{ settings.icon }} icon-middle">settings</span>
                    <span>SKU: </span>
                    <span class="variant-sku" itemprop="sku">{{ sku }}</span>
                  </span>
                </li>
                {%- endif -%}
              </ul>
            </div>
            {%- endif -%}

            <div class="grid grid-xsmall flex-nowrap product-title-container">
              <div class="grid__item flex-fill">
                <h1 class="product-single__title{% if section.settings.product_title_large %} page-title{% endif %}" itemprop="name">{{ title }}</h1>
              </div>

              {%- render "dbtfy-wish-list", type: "button", product: product -%}
            </div>

            {%- unless emptyState -%}
              {%- render "review-badge" with product as product, position: "product_page", class: "spacer-bottom" -%}
              <div class="dbtfy-product-sales-countdown-box main-product-block" {% if product.selected_variant.available == false %}{% endif %}></div>
            {%- endunless -%}

            <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
              {%- assign product_description = product.description | strip_html | replace: "[split_description]", "" | newline_to_br | split: '<br />' -%}
              {%- assign filtered_description = '' -%}

              {%- for line in product_description -%}
                {%- if line != blank -%}
                  {%- assign filtered_description = filtered_description | append: line -%}
                {%- endif -%}
              {%- endfor -%}

              <meta itemprop="url" content="{{ shop.url }}{{ product.url }}">
              <meta itemprop="description" content="{{ filtered_description }}">
              <meta itemprop="priceCurrency" content="{{ cart.currency.iso_code }}">
              <link itemprop="availability" href="http://schema.org/{%- if product.available -%}InStock{%- else -%}OutOfStock{%- endif -%}">

              {%- if current_variant.inventory_quantity > 0 and current_variant.inventory_management == "shopify" -%}
              <meta itemprop="inventoryLevel" content="{{ current_variant.inventory_quantity }}">
              {%- endif -%}
                {%- render "dbt2" with product as product -%}

              <div class="price-container text-money text-large spacer-bottom flex align-center{% if current_variant.unit_price_measurement %} price-container--unit-available{% endif %}" data-price-container>
               <div style="display:flex; flex-wrap:wrap; padding-top:5px;"> 
                <div style="padding-bottom:5px; padding-top:5px;">
                  <span id="ProductPrice"
                    class="product-single__price{% if on_sale %} on-sale text-sale{% endif %}"
                    itemprop="price"
                    content="{{ price | divided_by: 100.00 }}"
                    {% if on_sale %}
                    aria-label="{{ 'products.general.sale_price' | t }}"
                    {% else %}
                    aria-label="{{ 'products.general.regular_price' | t }}"
                    {% endif %}>
                    <span class="money">{{ price | money }}</span>
                  </span>

                  <span id="ComparePrice"
                    class="product-single__price--compare-at text-muted text-strike{% unless on_sale %} hide{% endunless %}"
                    aria-label="{{ 'products.general.regular_price' | t }}">
                    <span class="money">{{ compare_at_price | money }}</span>
                  </span>	
                  <br>
                </div>
				
				
                {% comment %}
                <div class="product-single__unit">
                  {%- capture unit_price_separator -%}
                    <span aria-hidden="true">/</span><span class="visually-hidden">&nbsp;{{ 'general.accessibility.unit_price_separator' | t }}&nbsp;</span>
                  {%- endcapture -%}

                  {%- capture unit_price_base_unit -%}
                    <span data-unit-price-base-unit>
                      {%- if current_variant.unit_price_measurement -%}
                        {%- if current_variant.unit_price_measurement.reference_value != 1 -%}
                          {{- current_variant.unit_price_measurement.reference_value -}}
                        {%- endif -%}
                        {{ current_variant.unit_price_measurement.reference_unit }}
                      {%- endif -%}
                    </span>
                  {%- endcapture -%}
                  <span class="product-unit-price">
                    <span class="visually-hidden">{{ 'products.general.unit_price' | t }}</span>
                    <span data-unit-price><span class="money"></span>{{ current_variant.unit_price | money }}</span>{{- unit_price_separator -}}{{- unit_price_base_unit -}}
                  </span>                  
                </div>
                 {% endcomment %}
               
                </div>
              </div>
               <div class="additional_content">
              <span style="color: #515151;font-size: 14px;" class="install">
                  em até 12x de R$ <b>
                  {% assign install_tax = 19.79 | divided_by: 100 %}
                  {% assign tax = current_variant.price | times: install_tax %}
                  {% assign tax_price = current_variant.price | plus: tax | divided_by: 12 | money %}
                  {{ tax_price }} </b> </span>
              </div>
              
              <div class="icon-box">
                <span style="display:block;margin-bottom: 10px;color:#1050E0;font-size: 13px;"><svg style="margin-right: 10px;
    fill: #1050E0;max-width: 16px;
    vertical-align: middle;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
<g id="XMLID_1_">
	<path id="XMLID_5_" d="M256,0C115.4,0,0,115.4,0,256s115.4,256,256,256s256-115.4,256-256S396.6,0,256,0z M203.9,392.8L72.6,261.6   l37.2-37.2l95,95L404,120.1l37.2,37.2L203.9,392.8z"/>
</g>
</svg>Garantia de 30 dias em nossa loja</span>
                <span style="display:block;margin-bottom: 10px;color:#1050E0;font-size: 13px;"><svg style="margin-right: 10px;
    fill: #1050E0;max-width: 16px;
    vertical-align: middle;"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
<g>
	<path d="M512,256c0,119.65-96.84,217.04-215.93,217.04c-43.96,0-86.26-13.36-122.43-37.84c-10.02-7.23-12.8-20.59-5.57-31.17   c7.24-10.02,20.59-12.8,31.17-5.57c28.38,19.48,62.33,30.05,96.83,30.05c94.61,0,171.41-77.36,171.41-172.52   c0-95.17-76.8-172.52-171.41-172.52c-92.38,0-168.06,74.02-171.41,166.4l51.76-52.31c8.91-8.9,22.82-8.9,31.72,0   c8.91,8.9,8.91,22.82,0,31.72l-85.15,85.15c-4.45,4.45-10.02,6.68-15.58,6.68c-6.12,0-11.69-2.23-15.58-6.68L6.68,228.73   c-8.9-8.9-8.9-22.82,0-31.72c8.91-8.91,22.82-8.91,31.72,0l42.3,42.85C88.49,128,181.98,38.96,296.07,38.96   C415.16,38.96,512,136.35,512,256z M294.96,129.67c-12.24,0-22.26,10.02-22.26,22.26V256c0,6.12,2.78,11.68,7.23,15.58l47.86,47.86   c4.45,4.45,10.02,6.67,16.14,6.67c5.57,0,11.68-2.22,15.58-6.67c8.9-8.91,8.35-22.82-0.55-31.72l-41.74-41.18v-94.61   C317.22,139.69,307.2,129.67,294.96,129.67z"/>
</g>
</svg>7 dias para trocas e devoluções</span>
              </div>
               
              
              {%- if section.settings.show_product_description -%}
                {%- if is_to_split_description -%}
                  <div id="productDescription" class="product-single__description rte spacer-top">
                    {%- assign first_part = product.description | split: '<p>[split_description]</p>' | first -%}

                    {%- unless first_part contains '[split_description]' -%}
                      {{ first_part }}
                    {%- else -%}
                      {{ product.description | split: '[split_description]' | first }}
                    {%- endunless -%}
                  </div>
                {%- endif -%}
              {%- endif -%}

              {%- if live_view_under_price -%}
                <div class="card card-body spacer-auto spacer-bottom live-view-delivery-time-features">
                  {%- render "dbtfy-live-view" -%}
                </div>
              {%- endif -%}

              {%- if emptyState -%}
                <div class="product-single__add-to-cart">
                  <button type="button" class="btn btn--primary btn--add-to-cart full">
                    <span class="btn__text">
                      <span class="{{ settings.icon }} button-cart-icon">{{ settings.icon_cart }}</span>
                      <span class="btn__add-to-cart-text">
                        {{ 'products.product.add_to_cart' | t }}
                      </span>
                    </span>
                  </button>
                </div>
              {%- else -%}
                {%- capture "form_classes" -%}
                  product-single__form {% if product.has_only_default_variant %} product-single__form--no-variants{% endif %}
                {%- endcapture -%}

                {%- capture "form_id" -%}AddToCartForm--{{ section.id }}{%- endcapture -%}

                {%- render "dbtfy-color-swatches" with product as product, id: id -%}

                <div class="dbtfy-size-chart-box"></div>

                {%- form 'product', product, class: form_classes, id: form_id, data-product-form: '' -%}
                  {%- unless product.has_only_default_variant -%}
                    <div class="grid grid-small">
                    {%- for option in product.options_with_values -%}
                      {%- assign is_color_option = false -%}

                      {%- if content_for_header contains 'debutify' and product.available and product.variants.size >= 1 and settings.dbtfy_color_swatches -%}
                        {%- assign swatch_list = settings.dbtfy_color_swatches_color | split: "," -%}

                        {%- for swatch in swatch_list -%}
                          {%- assign swatch_option_name = swatch | handleize -%}
                          {%- assign option_name = option.name | handleize -%}
                          {%- if option_name == swatch_option_name -%}
                            {%- assign is_color_option = true -%}
                          {% endif %}
                        {%- endfor -%}
                      {%- endif -%}

                      {% assign first_option_value = current_variant.options[forloop.index0] | escape %}

                      <div class="grid__item radio-wrapper product-form__item"{%- if is_color_option -%} hidden{%- endif -%}>
                        <label class="single-option-radio__label"
                               for="ProductSelect-option-{{ forloop.index0 }}"
                               data-option-name="{{ option.name | escape }}">
                          {{ option.name | escape }}: <span class="variant-label-option-value">{{ first_option_value | escape }}</span>
                        </label>

                        {%- if section.settings.product_selector == 'radio' -%}
                          <fieldset class="single-option-radio inline-list"
                            id="ProductSelect-option-{{ forloop.index0 }}">
                            {%- assign option_index = forloop.index -%}

                            {%- for value in option.values -%}
                              {%- assign variant_label_state = true -%}

                              {%- if product.options.size == 1 -%}
                                {%- unless product.variants[forloop.index0].available -%}
                                  {%- assign variant_label_state = false -%}
                                {%- endunless -%}
                              {%- endif -%}

                              <input type="radio"
                                {% if option.selected_value == value -%} checked="checked"{% endif %}
                                value="{{ value | escape }}"
                                data-index="option{{ option_index }}"
                                name="option{{ option.position }}"
                                class="single-option-selector__radio js-single-option-selector"
                                id="ProductSelect-option-{{ section.id }}-{{ option.name | handleize }}-{{ value | escape }}">

                              <label for="ProductSelect-option-{{ section.id }}-{{ option.name | handleize }}-{{ value | escape }}"{% unless variant_label_state %} class="text-strike"{% endunless %}>{{ value | escape }}</label>
                            {%- endfor -%}
                          </fieldset>
                        {%- else -%}
                          <select name="option{{ option.position }}"
                                  class="single-option-list-type single-option-selector__radio single-option-selector-{{ section.id }} product-form__input select--small js-single-option-selector"
                                  id="SingleOptionSelector-{{ forloop.index0 }}"
                                  data-index="option{{ forloop.index }}">
                            {%- for value in option.values -%}
                              <option value="{{ value | escape }}"{% if option.selected_value == value %} selected="selected"{% endif %}>{{ value | escape }}</option>
                            {%- endfor -%}
                          </select>
                        {%- endif -%}
                      </div>
                    {%- endfor -%}
                    </div>
                  {%- endunless -%}

                  <select name="id"
                          id="MainProductSelect-{{ product.id }}"
                          class="product-single__variants no-js product-form__item"
                          data-section-id="{{ section.id }}">

                    {% for variant in product.variants %}
                      {%- assign product_qty = 0 -%}

                      {% if variant.inventory_management == "shopify" %}
                        {% if variant.inventory_policy == "continue" %}
                          {%- assign product_qty = 99999 -%}
                        {% else %}
                          {% if variant.inventory_quantity > 0 %}
                            {%- assign product_qty = variant.inventory_quantity -%}
                          {% else %}
                            {%- assign product_qty = 0 -%}
                          {% endif %}
                        {% endif %}
                      {% else %}
                        {%- assign product_qty = 99999 -%}
                      {% endif %}

                      <option
                          {% if variant == product.selected_or_first_available_variant %}selected="selected"{% endif %}
                          {% unless variant.available %}disabled="disabled"{% endunless %}
                          data-sku="{{ variant.sku }}"
                          data-inventory-policy="{{ variant.inventory_policy }}"
                          data-inventory-quantity="{{ product_qty }}"
                          data-option-1="{{ variant.option1 }}"
                          data-option-2="{{ variant.option2 }}"
                          data-option-3="{{ variant.option3 }}"
                          value="{{ variant.id }}">
                        {%- if variant.available -%}
                          {{ variant.title }} - {{ variant.price | money_with_currency }}
                        {%- else -%}
                          {{ variant.title }} - {{ 'products.product.sold_out' | t }}
                        {%- endif -%}
                      </option>
                    {% endfor %}
                  </select>

                  {%- assign hide_quantity_box = true -%}

                  {%- if section.settings.quantity_enabled or settings.dbtfy_quantity_breaks or settings.dbtfy_inventory_quantity -%}
                    {%- assign hide_quantity_box = false -%}
                  {%- endif -%}

                  {%- if section.settings.quantity_enabled or settings.dbtfy_quantity_breaks or settings.dbtfy_inventory_quantity -%}
                    <div class="product-single__quantity spacer-bottom" {%- if hide_quantity_box -%}hidden{%- endif -%}>
                      {%- assign quantity_id = 'product-' | append: product.id -%}

                      {%- if section.settings.quantity_enabled or settings.dbtfy_quantity_breaks -%}
                        <label class="inline-label" for="{{ quantity_id }}" {% if section.settings.quantity_enabled == false and settings.dbtfy_quantity_breaks %}hidden {% endif %}>{{ 'products.product.quantity' | t }}</label>
                      {%- endif -%}
                      <div>
     <svg style="      margin-right: 155px;
    max-width: 16px;
    background: right;
    fill: #444444;
    float: right;
    vertical-align: middle;
    margin-left: -208px;
    margin-top: 1px;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve">
<g>
	<path d="M512,256c0,119.65-96.84,217.04-215.93,217.04c-43.96,0-86.26-13.36-122.43-37.84c-10.02-7.23-12.8-20.59-5.57-31.17   c7.24-10.02,20.59-12.8,31.17-5.57c28.38,19.48,62.33,30.05,96.83,30.05c94.61,0,171.41-77.36,171.41-172.52   c0-95.17-76.8-172.52-171.41-172.52c-92.38,0-168.06,74.02-171.41,166.4l51.76-52.31c8.91-8.9,22.82-8.9,31.72,0   c8.91,8.9,8.91,22.82,0,31.72l-85.15,85.15c-4.45,4.45-10.02,6.68-15.58,6.68c-6.12,0-11.69-2.23-15.58-6.68L6.68,228.73   c-8.9-8.9-8.9-22.82,0-31.72c8.91-8.91,22.82-8.91,31.72,0l42.3,42.85C88.49,128,181.98,38.96,296.07,38.96   C415.16,38.96,512,136.35,512,256z M294.96,129.67c-12.24,0-22.26,10.02-22.26,22.26V256c0,6.12,2.78,11.68,7.23,15.58l47.86,47.86   c4.45,4.45,10.02,6.67,16.14,6.67c5.57,0,11.68-2.22,15.58-6.67c8.9-8.91,8.35-22.82-0.55-31.72l-41.74-41.18v-94.61   C317.22,139.69,307.2,129.67,294.96,129.67z"></path>
</g>
</svg> <p id="random_number" style="text-align: right;
    font-size: 13px;
    margin-top: -25px;"></p>
                      </div>
                      {%- render "dbtfy-inventory-quantity", product: product -%}

                     
                    </div>
                  {%- endif -%}
     
			<div style="display:flex;">
				   {%- if section.settings.quantity_enabled -%}
                        {%- render "quantity-selector", type: "product", id: quantity_id -%}
                      {%- elsif settings.dbtfy_quantity_breaks -%}
                        <div class="qty-container"></div>
                      {%- endif -%}
                  <div class="product-single__add-to-cart">
                    <button type="submit" name="add" id="AddToCart--{{ section.id }}" class="btn btn--primary btn--add-to-cart full"{% unless current_variant.available %} disabled="disabled"{% endunless %}>
                      <span class="btn__text">
                        <span class="{{ settings.icon }} button-cart-icon">{{ settings.icon_cart }}</span>
                        <span class="btn__add-to-cart-text">
                          {%- if current_variant.available -%}
                            {{ 'products.product.add_to_cart' | t }}
                          {%- else -%}
                            {{ 'products.product.sold_out' | t }}
                          {%- endif -%}
                        </span>
                      </span>
                    </button>
                    
                   
                    {%- if settings.enable_payment_button -%}
                      {{ form | payment_button }}
                    {%- endif -%}
                  </div>               
              </div>
            
                {%- endform -%}

                {% render "dbtfy-back-in-stock", product: product, current_variant: current_variant %}
              {%- endif -%}
            </div>

            {%- render "dbtfy-trust-badge", position: "product_page" -%}

            {%- if live_view_under_button -%}
              <div class="card card-body spacer-auto spacer-top live-view-delivery-time-features">
                {%- render "dbtfy-live-view" -%}
              </div>
            {%- endif -%}

            {%- if product_tabs_position == "under_addtocart" or product_tabs_position == "above_description" and product_description_position == "under_addtocart" -%}
              {%- render "dbtfy-product-tabs" with product as product, class: 'spacer-top', is_split_description: is_to_split_description -%}
            {%- endif -%}

            {%- if section.settings.show_product_description -%}
              {%- if product_description_position == "under_addtocart" -%}
                {%- unless is_to_split_description -%}
                  <div id="productDescription" class="product-single__description spacer-bottom-none rte spacer-top">
                    {{ product.description | replace: '<p>[split_description]</p>', '' | replace: '[split_description]', '' }}
                  </div>
                {%- endunless -%}
              {%- endif -%}
            {%- endif -%}

            {%- if product_tabs_position == "under_description" and product_description_position == "under_addtocart" -%}
              {%- unless has_description -%}
                {%- assign tab_spacing_class = "spacer-top" -%}
              {%- endunless -%}

              {%- render "dbtfy-product-tabs" with product as product, class: tab_spacing_class, is_split_description: is_to_split_description -%}
            {%- endif -%}

            {%- render "dbtfy-social-discount", type: "button" -%}

            {%- if section.settings.show_sharing_icons -%}
              {%- render "social-sharing", share_button: "btn btn-square-xsmall", container_class: "spacer-top" -%}
            {%- endif -%}

            {%- if section.settings.show_product_tags and product.tags.size > 0 -%}
            <div class="product-tags spacer-top">
              <ul class="inline-list">
                <li class="tag-label">
                  <span class="{{settings.icon}}" aria-hidden="true">local_offer</span>
                  {{ 'blogs.article.tags' | t }}
                </li>
                {%- for tag in product.tags -%}
                <li>
                  <a class="btn btn-reveal-primary btn--xsmall" href="/collections/all/{{ tag | handleize }}">{{ tag }}</a>
                </li>
                {%- endfor -%}
              </ul>
            </div>
            {%- endif -%}

            {%- if section.settings.show_product_collections and product.collections.size > 0 -%}
            <div class="product-tags spacer-top">
              <ul class="inline-list">
                <li class="tag-label">
                  <span class="{{ settings.icon }}" aria-hidden="true">layers</span>
                  {{ 'collections.general.catalog_title' | t }}
                </li>
                {%- for collection in product.collections -%}
                <li>
                  <a class="btn btn-reveal-primary btn--xsmall" href="{{ collection.url }}">{{ collection.title }}</a>
                </li>
                {%- endfor -%}
              </ul>
            </div>
            {%- endif -%}

            {%- if section.settings.show_full_details -%}
            <div class="spacer-top">
              <a class="product-single__full-details text-link"{% unless emptyState %} href="{{ product.url }}?variant={{ current_variant.id }}"{% endunless %}>
                {{ 'products.product.full_details' | t }}
                <span class="{{ settings.icon }}" aria-hidden="true">arrow_forward</span>
              </a>
            </div>
            {%- endif -%}
          </div>
        </div>

        {%- render "dbtfy-sticky-addtocart" with product as product, current_variant: current_variant -%}

        {%- render "product-info-json", product: product -%}
      </div>

    </div><!-- /.wrapper -->
  </div><!-- /.box -->
</div><!-- /.product-single -->

{%- if show_info_section -%}
<div class="section-description box {{ section.settings.description_style }} {{ section.settings.text_alignment }} {{ section.settings.text_alignment_mobile }}">
  <div class="wrapper">
    <div class="grid">
      <div class="grid__item{% unless section.settings.description_full %} large--eight-twelfths push--large--two-twelfths{% endunless %}">
        {%- if product_tabs_position == "separate_section" or product_tabs_position == "above_description" and product_description_position == "separate_section" -%}
          {%- render "dbtfy-product-tabs" with product as product, is_split_description: is_to_split_description -%}
        {%- endif -%}

        {%- if section.settings.show_product_description -%}
          {%- if product_description_position == "separate_section" or is_to_split_description -%}
            <div id="productDescription" class="product-single__description rte spacer-bottom-none">
              {%- if is_to_split_description -%}
                {%- assign second_part = product.description | split: '<p>[split_description]</p>' | last -%}

                {%- unless second_part contains '[split_description]' -%}
                  {{ second_part }}
                {%- else -%}
                  {{ product.description | split: '[split_description]' | last }}
                {%- endunless -%}
              {%- else -%}
                {{ product.description | replace: '<p>[split_description]</p>', '' | replace: '[split_description]', '' }}
              {%- endif -%}
            </div>
          {%- endif -%}
        {%- endif -%}

        {%- if product_tabs_position == "under_description" and product_description_position == "separate_section" -%}
          {%- render "dbtfy-product-tabs" with product as product, is_split_description: is_to_split_description -%}
        {%- endif -%}
      </div>
    </div>
  </div>
</div>
{%- endif -%}

{%- render "dbtfy-addtocart-animation" -%}

{%- unless emptyState -%}
<script type="application/json" id="ProductJson-{{ section.id }}" class="mainProductJson">
{
  "available": {{ product.available | json }},
  "collections": {{ product.collections | json }},
  "compare_at_price": {{ product.compare_at_price | json }},
  "compare_at_price_max": {{ product.compare_at_price_max | json }},
  "compare_at_price_min": {{ product.compare_at_price_min | json }},
  "compare_at_price_varies": {{ product.compare_at_price_varies | json }},
  "content": {{ product.content | json }},
  "created_at": {{ product.created_at | json }},
  "description": {{ product.description | json }},
  "featured_image": {{ product.featured_image | json }},
  "first_available_variant_compare_at_price": {{ product.selected_or_first_available_variant.compare_at_price | json }},
  "handle": {{ product.handle | json }},
  "id": {{ product.id | json }},
  "images": {{ product.images | json }},
  "media": {{ product.media | json }},
  "options": {{ product.options | json }},
  "options_with_values": {
    {% for product_option in product.options_with_values %}
      "option{{ product_option.position }}": {{ product_option.values | json }}{% unless forloop.last %},{% endunless %}
    {% endfor %}
  },
  "price": {{ product.price | json }},
  "price_max": {{ product.price_max | json }},
  "price_min": {{ product.price_min | json }},
  "price_varies": {{ product.price_varies | json }},
  "published_at": {{ product.published_at | json }},
  "requires_selling_plan": {{ product.requires_selling_plan | json }},
  "selling_plan_groups": {{ product.selling_plan_groups | json }},
  "tags": {{ product.tags | json }},
  "title": {{ product.title | json }},
  "type": {{ product.type | json }},
  "variants": {{ product.variants | json }},
  "vendor": {{ product.vendor | json }},
  "has_only_default_variant": {{ product.has_only_default_variant | json }}
}
</script>

<script type="application/json" id="ModelJson-{{ section.id }}">
{{ product.media | where: 'media_type', 'model' | json }}
</script>
{%- endunless -%}
